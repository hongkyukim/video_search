
<script type="text/javascript"><!--
google_ad_client = "ca-pub-0949416212566989";
/* home.videotouch.tv */
google_ad_slot = "4540411187";
google_ad_width = 728;  /* original 728 */
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

<p>
<%= form_tag channels_path, :method => 'get' do %>
  
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search channels", :name => nil %>
  
<% end %>

<% if false %>
<!--<%= f.select :language,   Language.all.collect {|p| [ p.name, p.shortname ] } %>-->
<!-- <%= text_field_tag :language, params[:language] %>--->
<!--<p><%= link_to "Advanced Search", new_search_path %></p>-->
<%= debug(@languages) %>
 <%= select_tag :language, @languages.collect {|p| [ p.name, p.shortname ] }  %>

 :multiple => true,:include_blank => true,
<% end %>

<% if false %>
<%= form_tag channels_path, :method => 'get' do %>
 
    <%= select_tag :language, options_from_collection_for_select(@languages, "id", "name"),  :prompt => "All" %>
    <%= submit_tag "Set Language", :name => nil %>
 
<% end %>
<% end %>
 </p>


<% if true %>
<% if !@channels.nil? %>
<div id="videoguide">

  <% @channels.each do |chan| %>

     <td>
	<a href="/channels/<%= chan.id %>/videos">
         <div class="channel-image"><%= image_tag chan.thumbnail_url, :size => "110x75" if chan.thumbnail_url %></div></a> </td>

     <td>
	 <div class="post-channeltitle"><%= link_to h(chan.name), videos_channel_path(chan) %></div>
         <div class="post-channelid"> <i>#<%= chan.id %></i> <em><%= chan.language %></em> <i><%= Time.parse(chan.created_at.to_s).strftime("Created on %m/%d/%Y")%></i></div>
         <div class="post-channelid2"><%= link_to 'Show Videos ', videos_channel_path(chan) %> </div>
     </td>


	 <% if user_signed_in? %>
	    <% if current_user.admin? %>

                <% if can? :update, chan %>
                    <td><div class="post-channelid2"><%= link_to 'Show', channel_path(chan) %></div></td>
                    <td><div class="post-channelid2"><%= link_to 'Edit', edit_channel_path(chan) %></div></td>
                <% end %>
                <% if @show_delete %>
		        <% if can? :destroy, chan %>
		             <td><div class="post-channelid2"><%= button_to 'Destroy', chan, confirm: 'Are you sure?', method: :delete %></div></td>
		        <% end %>
                <% end %>
	    <% end %>
	<% end %>
       
 <% end %>
 <br />
 <%= will_paginate @channels %>


</div>
<% end %>

<% else %>


<% if @channels %>
<table>
	  <tr>
	    <th>Name</th>
	    <th>Videos</th>
	    <th></th>
	    <th></th>
	  </tr>

     <% for channel in @channels %>
	  <tr>
	    <td><%= channel.name %></td>
	    <td><%= link_to 'Show Videos ', videos_channel_path(channel) %></td>

	<% if false %>
	    <td><%= link_to 'Show', channel_path(channel) %></td>
	    <% if can? :update, channel %>
		<td><%= link_to 'Edit', edit_channel_path(channel) %></td>
	    <% end %>
	<% end %>

	    <% if user_signed_in? %>
	    <% if current_user.admin? %>

                <% if can? :update, channel %>
                    <td><%= link_to 'Edit', edit_channel_path(channel) %></td>
                <% end %>

		<% if can? :destroy, channel %>
		    <td><%= link_to 'Destroy', channel, confirm: 'Are you sure?', method: :delete %></td>
		<% end %>
	    <% end %>
	    <% end %>
	  </tr>
    <% end %>

</table>


<% else %>
There is no channels.
<% end %>
<% end %>



<br />

<!--<%= link_to 'New Channel', new_channel_path %>-->

<% if user_signed_in? %>
      <%= link_to "Add My New Channel", new_user_channel_path(current_user) %>
      | <%= link_to "Go To My Channels", channels_user_path(current_user) %>
      <% if current_user.admin? %>
         | <%= link_to "View Users", users_path %>
      <% end %>
<% end %>


<!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-size="small" data-annotation="inline" data-width="300"></div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<% if user_signed_in? %>
<% if current_user.admin? %>


<% end %>
<% end %>

